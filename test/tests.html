<html>
  <head>
    <title>Dropload</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>
      body {
        padding: 50px;
      }
      #drop {
        width: 300px;
        height: 300px;
        border: 1px dotted #ddd;
      }
      #drop.over {
        border: 3px dotted #ddd;
      }
    </style>
  </head>
  <body>
    <div id="drop"></div>
    <script src="build/build.js"></script>
    <script>
      var Dropload = require('dropload');
      var drop = Dropload(document.getElementById('drop'));

      drop.validate(function(file, fn){
        var limit = 1024 * 1024;
        var type = file.type.split('/')[0];
        if ('image' != type) return fn(new Error("that's not an image :)"));
        if (file.size > limit) return fn(new Error('file size of 1mb exceeded'));
        fn();
      });

      drop.on('error', function(err){
        console.error(err.message);
      });

      drop.on('upload', function(upload){
        console.log('uploading %s', upload.file.name);
        upload.to('/upload');
      });
    </script>
  </body>
</html>
